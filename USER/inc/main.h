/*
*********************************************************************************************************
*                                     MICIRUM BOARD SUPPORT PACKAGE
*
*                             (c) Copyright 2013; Micrium, Inc.; Weston, FL
*
*               All rights reserved.  Protected by international copyright laws.
*               Knowledge of the source code may NOT be used to develop a similar product.
*               Please help us continue to provide the Embedded community with the finest
*               software available.  Your honesty is greatly appreciated.
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*
*                                        BOARD SUPPORT PACKAGE
*
*                                     ST Microelectronics STM32
*                                              on the
*
*                                     Micrium uC-Eval-STM32F103
*                                        Evaluation Board
*
* Filename      : main.h
* Version       :
* Programmer(s) :
*********************************************************************************************************
*/

#ifndef  __Main_H__
#define  __Main_H__




/*
*********************************************************************************************************
*                                                 EXTERNS
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                                              INCLUDE FILES
*********************************************************************************************************
*/
#include <includes.h>

/*
*********************************************************************************************************
*                                          GPIO PIN DEFINITIONS
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                               INT DEFINES
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                                             PERIPH DEFINES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                               DATA TYPES
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                                            GLOBAL VARIABLES
*********************************************************************************************************
*/



extern u8 g_ucTransFlag;           // 数据发送间隔时间标志
extern u32 g_uiTransInternal;      // 默认发送数据的间隔时间30s
extern u32 g_uiGyro;               // 角速度阈值

extern CanQueue  g_tCanRxQueue;        // CAN接收卡机数据队列
extern UartQueue g_tUARTRxQueue;       // UART接收PC机数据队列
extern CanRxMsg  g_tCanRxMsg;          // CAN数据出队元素
extern u8 g_ucaUartRxMsg[100];          // UART数据出队元素

/*
*********************************************************************************************************
*                                                 MACRO'S
*********************************************************************************************************
*/

//#define __DEBUG__

#ifdef __DEBUG__
#define DEBUG(format,...) printf("File: "__FILE__", Line: %05d: "format"\n", __LINE__, ##__VA_ARGS__)
#else
#define DEBUG(format,...) do{}while(0)
#endif

#ifdef __DEBUG__
#define DEBUG_printf(format,...) printf(format,##__VA_ARGS__)
#else
#define DEBUG_printf(format,...) do{}while(0)
#endif


void Kalman_Filter(float Accel,float Gyro);
void Angle_Calculate(void);




/*
*********************************************************************************************************
*                                           FUNCTION PROTOTYPES
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                                           INTERRUPT SERVICES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                     PERIPHERAL POWER/CLOCK SERVICES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                              LED SERVICES
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                                              STATUS INPUTS
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                             MODULE END
*********************************************************************************************************
*/


#endif




